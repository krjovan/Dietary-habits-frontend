<div style="display: table; margin-top: 10px; margin-left: auto; margin-right: auto; margin-bottom: 10px;">
  <a class="desktop-button" style="cursor: pointer;" routerLink="/search-add"> <button class="w3-btn w3-green"><i class="fa fa-cutlery"></i> Add food</button></a>
<div id="date_label" style="font-size: 20px; display: table-cell;" class="w3-center w3-padding">Date </div>
<div>
<input type="date" [ngModel] ="dateOfConsumption | date:'yyyy-MM-dd'" (ngModelChange)="onDateChange($event)">
</div>
</div>

<div *ngIf="!isLoaded" class="loader"></div>

<h3 style="margin-bottom: 120vh;" class="w3-center w3-padding" *ngIf="nutritions.length == 0 && isLoaded">No data for this date</h3>

<div class="wrapper">
  <div class="graph-div"><div class="canvas-graph" id="chartContainer"></div></div>
  <div class="graph-div"><div class="canvas-graph" id="chartContainer2"></div></div>
  <div class="graph-div"><div class="canvas-graph" id="chartContainer1"></div></div>
</div>

<div *ngIf="nutritions.length > 0 && isLoaded">

<!--Fixed mobile button-->
<div routerLink="/search-add" class="mobile-btn">+</div>

<div *ngIf="isLoaded" id="divForTable" class="tableFixHead">
  <table style="width:80vw;" id="user-nutritions">
  <thead>
    <tr class="w3-blue">
      <th class="w3-center"><div style="width: 200px;">Food</div></th>
      <th class="w3-center">Quantity (g)</th>
      <th class="w3-center">Action</th>

      <th class="w3-center">Calories</th>
      <th class="w3-center">Carbohydrate (g)</th>
      <th class="w3-center">Fiber (g)</th>
      <th class="w3-center">Protein (g)</th>
      <th class="w3-center">Total fat (g)</th>
      <th class="w3-center">Saturated fat (g)</th>
      <th class="w3-center">Fatty acids total trans (g)</th>
      <th class="w3-center">Cholesterol (mg)</th>
      <th class="w3-center">Sugars (g)</th>
      <th class="w3-center">Water (g)</th>

      <th class="w3-center">Vitamin A RAE (mcg)</th>
      <th class="w3-center">Thiamin - B1 (mg)</th>
      <th class="w3-center">Riboflavin - B2 (mg)</th>
      <th class="w3-center">Niacin - B3 (mg)</th>
      <th class="w3-center">Pantothenic acid - B5 (mg)</th>
      <th class="w3-center">Vitamin B6 (mg)</th>
      <th class="w3-center">Folate - B9 (mcg)</th>
      <th class="w3-center">Vitamin B12 (mcg)</th>
      <th class="w3-center">Choline (mg)</th>
      <th class="w3-center">Vitamin C (mg)</th>
      <th class="w3-center">Vitamin D (IU)</th>
      <th class="w3-center">Vitamin E (mg)</th>
      <th class="w3-center">Vitamin K (mcg)</th>

      <th class="w3-center">Calcium (mg)</th>
      <th class="w3-center">Copper (mg)</th>
      <th class="w3-center">Iron (mg)</th>
      <th class="w3-center">Magnesium (mg)</th>
      <th class="w3-center">Manganese (mg)</th>
      <th class="w3-center">Phosphorous (mg)</th>
      <th class="w3-center">Potassium (mg)</th>
      <th class="w3-center">Selenium (mcg)</th>
      <th class="w3-center">Sodium (mg)</th>
      <th class="w3-center">Zink (mg)</th>
    </tr>
	</thead>
    <tr *ngFor="let nutrition of nutritions">
      <td class="w3-center"><div style="width: 200px;">{{nutrition.nutrition.name}}</div></td>
      <td style="white-space: nowrap;" class="w3-center"><input attr.id="{{nutrition._id}}" value="{{nutrition.quantity}}" type="number" style="width: 50pt;"> g</td>
      <td class="w3-center">
        <div class="w3-center">
          <button style="font-family : inherit; width: 100px; height: 40px;" (click)="updateUserNutrition(nutrition)" class="w3-blue"><i class="fa fa-edit"> Update</i></button>
        </div>
		<div style="padding-top: 4px;"></div>
		<div class="w3-center">
          <button style="font-family : inherit; width: 100px; height: 40px;" (click)="deleteUserNutrition(nutrition._id)" class="w3-red"><i class="fa fa-trash"> Delete</i></button>
        </div>
      </td>

      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.calories}} <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.calories/dri.calories_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.carbohydrate_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.carbohydrate_g/dri.carbohydrate_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.fiber_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.fiber_g/dri.fiber_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.protein_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.protein_g/dri.protein_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.total_fat_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.total_fat_g/dri.total_fat_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.saturated_fat_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.saturated_fat_g/dri.saturated_fat_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.fatty_acids_total_trans_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.fatty_acids_total_trans_g/dri.fatty_acids_total_trans_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.cholesterol_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.cholesterol_mg/dri.cholesterol_mg_min*100).toFixed(2)}} %) </span></td>
	    <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.sugars_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.sugars_g/dri.sugars_g_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.water_g}} g <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.water_g/dri.water_g_min*100).toFixed(2)}} %) </span></td>

      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_a_rae_mcg}} mcg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_a_rae_mcg/dri.vitamin_a_rae_mcg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.thiamin_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.thiamin_mg/dri.thiamin_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.riboflavin_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.riboflavin_mg/dri.riboflavin_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.niacin_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.niacin_mg/dri.niacin_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.pantothenic_acid_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.pantothenic_acid_mg/dri.pantothenic_acid_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_b6_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_b6_mg/dri.vitamin_b6_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.folate_mcg}} mcg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.folate_mcg/dri.folate_mcg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_b12_mcg}} mcg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_b12_mcg/dri.vitamin_b12_mcg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.choline_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.choline_mg/dri.choline_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_c_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_c_mg/dri.vitamin_c_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_d_IU}} IU <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_d_IU/dri.vitamin_d_IU_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_e_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_e_mg/dri.vitamin_e_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.vitamin_k_mcg}} mcg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.vitamin_k_mcg/dri.vitamin_k_mcg_min*100).toFixed(2)}} %) </span></td>

      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.calcium_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.calcium_mg/dri.calcium_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.copper_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.copper_mg/dri.copper_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.irom_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.irom_mg/dri.irom_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.magnesium_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.magnesium_mg/dri.magnesium_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.manganese_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.manganese_mg/dri.manganese_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.phosphorous_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.phosphorous_mg/dri.phosphorous_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.potassium_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.potassium_mg/dri.potassium_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.selenium_mcg}} mcg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.selenium_mcg/dri.selenium_mcg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.sodium_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.sodium_mg/dri.sodium_mg_min*100).toFixed(2)}} %) </span></td>
      <td style="white-space: nowrap;" class="w3-center">{{nutrition.quantity/100*nutrition.nutrition.zink_mg}} mg <span class="w3-text-green">({{(nutrition.quantity/100*nutrition.nutrition.zink_mg/dri.zink_mg_min*100).toFixed(2)}} %) </span></td>
    </tr>
	<tfoot>
	<tr style="background-color: #c2c1be;">
      <th class="w3-center"><div style="width: 200px;">Total</div></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.quantity}} g</th>
      <th style="white-space: nowrap;" class="w3-center"> - </th>

      <th style="white-space: nowrap;" class="w3-center">{{sum.calories}} <span class="w3-text-green">({{(sum.calories/dri.calories_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.carbohydrate_g}} g <span class="w3-text-green">({{(sum.carbohydrate_g/dri.carbohydrate_g_min*100).toFixed(2)}} %)</span></th>
	    <th style="white-space: nowrap;" class="w3-center">{{sum.fiber_g}} g <span class="w3-text-green">({{(sum.fiber_g/dri.fiber_g_min*100).toFixed(2)}} %)</span></th>
	    <th style="white-space: nowrap;" class="w3-center">{{sum.protein_g}} g <span class="w3-text-green">({{(sum.protein_g/dri.protein_g_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.total_fat_g}} g <span class="w3-text-green">({{(sum.total_fat_g/dri.total_fat_g_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.saturated_fat_g}} g <span class="w3-text-green">({{(sum.saturated_fat_g/dri.saturated_fat_g_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.fatty_acids_total_trans_g}} g <span class="w3-text-green">({{(sum.fatty_acids_total_trans_g/dri.fatty_acids_total_trans_g_min*100).toFixed(2)}} %)</span></th>
	    <th style="white-space: nowrap;" class="w3-center">{{sum.cholesterol_mg}} mg <span class="w3-text-green">({{(sum.cholesterol_mg/dri.cholesterol_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.sugars_g}} g <span class="w3-text-green">({{(sum.sugars_g/dri.sugars_g_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.water_g}} g <span class="w3-text-green">({{(sum.water_g/dri.water_g_min*100).toFixed(2)}} %)</span></th>

      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_a_rae_mcg}} mcg <span class="w3-text-green">({{(sum.vitamin_a_rae_mcg/dri.vitamin_a_rae_mcg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.thiamin_mg}} mg <span class="w3-text-green">({{(sum.thiamin_mg/dri.thiamin_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.riboflavin_mg}} mg <span class="w3-text-green">({{(sum.riboflavin_mg/dri.riboflavin_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.niacin_mg}} mg <span class="w3-text-green">({{(sum.niacin_mg/dri.niacin_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.pantothenic_acid_mg}} mg <span class="w3-text-green">({{(sum.pantothenic_acid_mg/dri.pantothenic_acid_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_b6_mg}} mg <span class="w3-text-green">({{(sum.vitamin_b6_mg/dri.vitamin_b6_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.folate_mcg}} mcg <span class="w3-text-green">({{(sum.folate_mcg/dri.folate_mcg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_b12_mcg}} mcg <span class="w3-text-green">({{(sum.vitamin_b12_mcg/dri.vitamin_b12_mcg_min*100).toFixed(2)}} %)</span></th>
	    <th style="white-space: nowrap;" class="w3-center">{{sum.choline_mg}} mg <span class="w3-text-green">({{(sum.choline_mg/dri.choline_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_c_mg}} mg <span class="w3-text-green">({{(sum.vitamin_c_mg/dri.vitamin_c_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_d_IU}} IU <span class="w3-text-green">({{(sum.vitamin_d_IU/dri.vitamin_d_IU_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_e_mg}} mg <span class="w3-text-green">({{(sum.vitamin_e_mg/dri.vitamin_e_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.vitamin_k_mcg}} mcg <span class="w3-text-green">({{(sum.vitamin_k_mcg/dri.vitamin_k_mcg_min*100).toFixed(2)}} %)</span></th>

      <th style="white-space: nowrap;" class="w3-center">{{sum.calcium_mg}} mg <span class="w3-text-green">({{(sum.calcium_mg/dri.calcium_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.copper_mg}} mg <span class="w3-text-green">({{(sum.copper_mg/dri.copper_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.irom_mg}} mg <span class="w3-text-green">({{(sum.irom_mg/dri.irom_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.magnesium_mg}} mg <span class="w3-text-green">({{(sum.magnesium_mg/dri.magnesium_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.manganese_mg}} mg <span class="w3-text-green">({{(sum.manganese_mg/dri.manganese_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.phosphorous_mg}} mg <span class="w3-text-green">({{(sum.phosphorous_mg/dri.phosphorous_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.potassium_mg}} mg <span class="w3-text-green">({{(sum.potassium_mg/dri.potassium_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.selenium_mcg}} mcg <span class="w3-text-green">({{(sum.selenium_mcg/dri.selenium_mcg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.sodium_mg}} mg <span class="w3-text-green">({{(sum.sodium_mg/dri.sodium_mg_min*100).toFixed(2)}} %)</span></th>
      <th style="white-space: nowrap;" class="w3-center">{{sum.zink_mg}} mg <span class="w3-text-green">({{(sum.zink_mg/dri.zink_mg_min*100).toFixed(2)}} %)</span></th>
    </tr>
	</tfoot>
  </table>

</div>
<div style="margin-bottom: 4vw;"></div>

</div>
